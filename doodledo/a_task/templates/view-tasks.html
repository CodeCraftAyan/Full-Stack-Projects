{% extends "base.html" %}

{% block title %}
DoodleDo | View-Task
{% endblock %}

{% block content %}

<main class="flex-grow p-10">
        
    <div class="flex items-center justify-between flex-wrap mb-4">
        <div>
            <h2 class="text-emerald-400 text-2xl font-semibold">View Your Doodle's</h2>
            <p>Your personalized task list, <span class="text-violet-400">{{ user.username }}</span>. Start adding your goals.</p>
        </div>
        <div class="mt-5">
            <a href="{% url "create-task" %}" class="bg-blue-400 hover:bg-blue-500 text-white px-6 py-2 rounded-md shadow-lg"><span class="bi bi-pencil"></span> Add Task</a>
        </div>
    </div>

    <div class="lg:w-10/12 mb-10">
        <ul class="flex flex-col lg:flex-row lg:gap-5">
            <li class="text-rose-600">
                <span class="bi bi-fire text-xl"></span> Urgent and Important
            </li>
            <li class="text-yellow-500">
                <span class="bi bi-clipboard-check text-xl"></span> Important, but Not Urgent
            </li>
            <li class="text-blue-400">
                <span class="bi bi-person-fill-up text-xl"></span> Urgent, but Not Important
            </li>
            <li class="text-gray-400">
                <span class="bi bi-eye-slash-fill text-xl"></span> Neither Urgent nor Important
            </li>
        </ul>
    </div>

    <div>
        <ul class="space-y-4">
            {% for task in tasks %}
            <li x-data="{ open: false }" class="cursor-pointer">

                {% if task.status %}
                <div @click="open = !open" class="flex flex-col sm:flex-row items-start sm:items-center gap-2 sm:gap-4">
                    <p class="text-sm font-medium text-gray-600 w-[20%] sm:w-[15%]">{{ task.time|time:"h:i A" }}</p>
                    <div class="w-full sm:w-[80%] border-l-4 border-green-400 py-3 px-4 bg-green-200 rounded-md shadow-md flex items-center justify-between transform transition-transform hover:scale-105">
                        <p class="text-gray-800 font-semibold">{{ task.title }}</p>
                        <p class="text-green-500"><span class="bi bi-check2-circle text-xl"></span> Complete</p>
                    </div>
                </div>
                {% else %}
                <div @click="open = !open" class="flex flex-col sm:flex-row items-start sm:items-center gap-2 sm:gap-4">
                    <p class="text-sm font-medium text-gray-600 w-[20%] sm:w-[15%]">{{ task.time|time:"h:i A" }}</p>
                    <div class="w-full sm:w-[80%] border-l-4 border-{{ task.bg_color }}-400 py-3 px-4 bg-{{ task.bg_color }}-200 rounded-md shadow-md flex items-center justify-between transform transition-transform hover:scale-105">
                        <p class="text-gray-800 font-semibold">{{ task.title }}</p>
                        <p class="text-rose-500"><span class="bi bi-check2-circle text-xl"></span> Pending</p>
                    </div>
                </div>
                {% endif %}
        
                <div x-show="open" x-collapse @click.outside="open = false" class="pl-[20%] sm:pl-[15%] mt-2">
                    <div class="bg-white p-4 rounded-lg shadow-sm">
                        <h2 class="text-lg font-semibold text-gray-800">{{ task.title }}</h2>
                        {% if task.status %}
                        <p class="text-green-500"><span class="bi bi-check2-circle text-xl"></span> Complete</p>
                        {% else %}
                        <p class="text-rose-500"><span class="bi bi-check2-circle text-xl"></span> Pending</p>
                        {% endif %}
                        <p class="text-gray-500 my-3">{{ task.description }}</p>
                        <p class="mt-1 text-sm text-gray-600 flex items-center gap-2">
                            <i class="bi bi-clock"></i> 
                            <span>{{ task.time|date:"Y-m-d" }}</span> 
                            <span>{{ task.time|time:"h:i A" }}</span>
                        </p>
                        <div class="mt-3 flex gap-3">
                            <a href="{% url "edit-task" task.id %}" class="text-sm text-blue-600 hover:text-blue-700"><span class="bi bi-pen"></span> Edit</a>
                            <a href="{% url "delete-task" task.id %}" class="text-sm text-red-600 hover:text-red-700"><span class="bi bi-trash3"></span> Delete</a>
                        </div>
                    </div>
                </div>
            </li>
            {% empty %}
            
            {% include "include/nothing.html" %}
        
            {% endfor %}
        </ul>
    </div>

</main>

{% endblock %}